(function(){"use strict";var e={371:function(e,n,t){var s=t(144),r=function(){var e=this,n=e._self._c;return n("div",{attrs:{id:"app"}},[n("h1",[e._v(e._s(e.title))]),"game"===e.currentScreen?n("GameView",{attrs:{mode:e.mode},on:{"show-final-screen":e.onShowFinalScreen}}):"final"===e.currentScreen?n("FinalScreenComp",{attrs:{questionCount:e.questionCount,score:e.finalScore},on:{"new-game":e.onNewGame}}):n("MenuComp",{on:{"standard-game":e.onStandardGame,"time-rush":e.onTimeRush}})],1)},o=[],i=function(){var e=this,n=e._self._c;return n("div",{staticClass:"game-view"},[n("QuestionDisplayComp",{attrs:{"question-text":e.questionText}}),n("AnswersDisplayComp",{attrs:{answers:e.answers,answersEnabled:e.answersEnabled,hasChosenAnswer:e.showAnswers},on:{"has-chosen-answer":e.onHasChosenAnswer}}),e.questionCount<10?n("button",{staticClass:"get-question-btn",attrs:{disabled:e.btnDisabled},on:{click:e.onGetQuestion}},[e._v(" Next question ")]):e._e(),n("div",{staticClass:"game-info-display"},[e.questionCount?n("p",{staticClass:"score-display"},[e._v(" Your current score: "+e._s(e.score)+" out of "+e._s(e.questionCount)+" questions ")]):e._e(),"rush"===e.mode?n("p",[e._v("Lives: "+e._s(e.lives))]):e._e(),"rush"===e.mode?n("p",[e._v("Time left: "+e._s(e.timeLeft)+" seconds")]):e._e()])],1)},a=[],u=function(){var e=this,n=e._self._c;return n("div",{staticClass:"answers-display"},[n("AnswerComp",{class:e.hasChosenAnswer&&e.answer0,attrs:{answersEnabled:e.answersEnabled,answer:e.answers[0]},on:{"show-answers":e.onShowAnswers}}),n("AnswerComp",{class:e.hasChosenAnswer&&e.answer1,attrs:{answersEnabled:e.answersEnabled,answer:e.answers[1]},on:{"show-answers":e.onShowAnswers}}),n("AnswerComp",{class:e.hasChosenAnswer&&e.answer2,attrs:{answersEnabled:e.answersEnabled,answer:e.answers[2]},on:{"show-answers":e.onShowAnswers}}),n("AnswerComp",{class:e.hasChosenAnswer&&e.answer3,attrs:{answersEnabled:e.answersEnabled,answer:e.answers[3]},on:{"show-answers":e.onShowAnswers}})],1)},c=[],l=function(){var e=this,n=e._self._c;return n("button",{staticClass:"answer-btn",attrs:{disabled:!e.answersEnabled},on:{click:function(n){return e.$emit("show-answers",e.answer.correct)}}},[n("p",{staticClass:"answer"},[e._v(e._s(e.answer.text))])])},h=[],d={name:"AnswerComp",props:{answer:{type:Object,required:!0},answersEnabled:{type:Boolean,required:!0}}},w=d,m=t(1),f=(0,m.Z)(w,l,h,!1,null,"5070f133",null),p=f.exports,b={name:"AnswersDisplayComp",props:{answers:{type:Array,required:!0},answersEnabled:{type:Boolean,required:!0},hasChosenAnswer:{type:Boolean,required:!0}},components:{AnswerComp:p},computed:{answer0:function(){return this.answers[0].correct+"Answer"},answer1:function(){return this.answers[1].correct+"Answer"},answer2:function(){return this.answers[2].correct+"Answer"},answer3:function(){return this.answers[3].correct+"Answer"}},methods:{onShowAnswers:function(e){this.$emit("has-chosen-answer",e)}}},C=b,v=(0,m.Z)(C,u,c,!1,null,"aa5ea2da",null),A=v.exports,S=function(){var e=this,n=e._self._c;return n("p",{staticClass:"question-display"},[e._v(e._s(e.questionText))])},q=[],_={name:"QuestionDisplayComp",props:["questionText"]},y=_,T=(0,m.Z)(y,S,q,!1,null,"08a0cc07",null),x=T.exports;function g(e){for(let n=0;n<e.length;n++){const t=this.getRandomInt(e.length),s=e[t];e[t]=e[n],e[n]=s}}function k(e){return Math.floor(Math.random()*e)}function E(e){const n=new DOMParser,t=n.parseFromString(e,"text/html");return t.documentElement.textContent}function M(e){this.answersEnabled=!1,this.showAnswers=!0,this.questionCount++,e?this.score++:this.lives--}function G(){this.lives<1&&this.showFinalScreen()}function D(){this.questionCount>=10&&this.showFinalScreen()}function O(e){const n={standardModeActions:D.bind(this),rushModeActions:G.bind(this)},t=e+"ModeActions";n[t]()}function F(e){this.timer=setInterval((()=>{e()}),100)}var L={name:"GameView",components:{QuestionDisplayComp:x,AnswersDisplayComp:A},props:{mode:{type:String,required:!0}},data(){return{sessionToken:"",questionText:"",answers:[],btnDisabled:!0,answersEnabled:!1,showAnswers:!1,score:0,questionCount:0,lives:3,timeLeft:120}},created:function(){this.displayDefaultValues(),this.getSessionToken(),this.handleGameModeActions.bind(this),this.onGetQuestion(),"rush"===this.mode&&(this.reduceTime.bind(this),this.deciSecondCounter.bind(this),this.deciSecondCounter(this.reduceTime))},beforeDestroy:function(){clearInterval(this.timer)},methods:{displayDefaultValues:function(){this.questionText="Waiting for question...",this.answers=[{text:"...",correct:null},{text:"...",correct:null},{text:"...",correct:null},{text:"...",correct:null}]},getSessionToken:async function(){try{const e=await fetch("https://opentdb.com/api_token.php?command=request");if(e.ok){const n=await e.json();this.sessionToken=n.token}else alert(e.statusText)}catch(e){alert(e)}},onHasChosenAnswer:function(e){this.handleGameSharedActions(e),this.handleGameModeActions(this.mode),this.btnDisabled=!1},onGetQuestion:function(){this.showAnswers=!1,this.btnDisabled=!0,this.displayDefaultValues(),this.callAPI(),this.answersEnabled=!0},callAPI:async function(){try{const e=await fetch(`https://opentdb.com/api.php?amount=1&type=multiple&token=${this.sessionToken}`);if(e.ok){const n=await e.json(),t=n.results[0].question;this.handleQuestion(t);const s=n.results[0].correct_answer,r=n.results[0].incorrect_answers;this.handleAnswers(s,r)}else alert(e.statusText)}catch(e){alert(e)}},handleQuestion:function(e){this.questionText=this.parseHTML(e)},handleAnswers:function(e,n){const t=[{text:this.parseHTML(e),correct:!0},{text:this.parseHTML(n[0]),correct:!1},{text:this.parseHTML(n[1]),correct:!1},{text:this.parseHTML(n[2]),correct:!1}];this.shuffleArray(t),this.answers=t},handleGameSharedActions:M,handleGameModeActions:O,showFinalScreen:function(){this.questionText="Waiting for results...";const e={score:this.score,questionCount:this.questionCount};setTimeout((()=>{this.$emit("show-final-screen",e)}),1500)},shuffleArray:g,getRandomInt:k,parseHTML:E,deciSecondCounter:F,reduceTime:function(){this.timeLeft=(this.timeLeft-.1).toFixed(1),this.timeLeft<=0&&this.timeUp()},timeUp:function(){clearInterval(this.timer),this.questionText="Time up!",this.answersEnabled=!1,this.btnDisabled=!0,setTimeout((()=>{this.showFinalScreen()}),1500)}}},j=L,Z=(0,m.Z)(j,i,a,!1,null,"71f1af16",null),H=Z.exports,Q=function(){var e=this,n=e._self._c;return n("div",{staticClass:"final-score-view"},[n("p",[e._v(" You answered "+e._s(e.score)+" questions correct out of "+e._s(e.questionCount)+". Your final score is "+e._s(e.finalScore)+" %. ")]),n("button",{staticClass:"new-game-btn",on:{click:e.onClick}},[e._v("New game")])])},$=[],I={name:"FinalScreenComp",props:{score:{type:Number,required:!0},questionCount:{type:Number,required:!0}},computed:{finalScore:function(){return 0===this.questionCount?0:Math.round(100*this.score/this.questionCount)}},methods:{onClick:function(){this.$emit("new-game")}}},P=I,V=(0,m.Z)(P,Q,$,!1,null,null,null),N=V.exports,R=function(){var e=this,n=e._self._c;return n("div",{staticClass:"menu-screen"},[n("button",{staticClass:"menu-btn",on:{click:e.onStandardGame}},[e._v("Standard game")]),n("button",{staticClass:"menu-btn",on:{click:e.onTimeRush}},[e._v("Time rush")])])},B=[],Y={name:"MenuComp",methods:{onStandardGame:function(){this.$emit("standard-game")},onTimeRush:function(){this.$emit("time-rush")}}},U=Y,W=(0,m.Z)(U,R,B,!1,null,null,null),z=W.exports,J={name:"App",components:{MenuComp:z,GameView:H,FinalScreenComp:N},data:function(){return{finalScore:0,questionCount:-1,currentScreen:"menu",mode:null}},computed:{title:function(){if("game"===this.currentScreen)switch(this.mode){case"standard":return"Answer 10 questions!";case"rush":return"Answer as many questions as you can before time runs out!";default:return"Game mode"}return"final"===this.currentScreen?"Summary":"Trivia app made with Vue.js"}},methods:{onShowFinalScreen:function(e){this.finalScore=e.score,this.questionCount=e.questionCount,this.currentScreen="final"},onNewGame:function(){this.mode="null",this.currentScreen="menu"},onStandardGame:function(){this.mode="standard",this.currentScreen="game"},onTimeRush:function(){this.mode="rush",this.currentScreen="game"}}},K=J,X=(0,m.Z)(K,r,o,!1,null,null,null),ee=X.exports;s.ZP.config.productionTip=!1,new s.ZP({render:e=>e(ee)}).$mount("#app")}},n={};function t(s){var r=n[s];if(void 0!==r)return r.exports;var o=n[s]={exports:{}};return e[s](o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,s,r,o){if(!s){var i=1/0;for(l=0;l<e.length;l++){s=e[l][0],r=e[l][1],o=e[l][2];for(var a=!0,u=0;u<s.length;u++)(!1&o||i>=o)&&Object.keys(t.O).every((function(e){return t.O[e](s[u])}))?s.splice(u--,1):(a=!1,o<i&&(i=o));if(a){e.splice(l--,1);var c=r();void 0!==c&&(n=c)}}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[s,r,o]}}(),function(){t.d=function(e,n){for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,s){var r,o,i=s[0],a=s[1],u=s[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(u)var l=u(t)}for(n&&n(s);c<i.length;c++)o=i[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(l)},s=self["webpackChunkvue_trivia"]=self["webpackChunkvue_trivia"]||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))}();var s=t.O(void 0,[998],(function(){return t(371)}));s=t.O(s)})();
//# sourceMappingURL=app.5ead55d6.js.map